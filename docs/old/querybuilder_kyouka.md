# 鏡花観点表（Queryビルダー共通・初期案）

## 1. 網羅性（Coverage）
- [ ] 各ビルダーが担当するSQL/KSQL構文（JOIN, GROUP BY, HAVING, SELECT, WINDOW, PROJECTION等）の主要パターンをすべてカバーしているか
- [ ] 単一条件／複合条件・複雑な式ツリー・入れ子（ネスト）などのパターンも含まれているか
- [ ] 投影（Select/Projection）のバリエーション（匿名型・型指定・集計関数・式展開等）を網羅しているか
- [ ] サポート外・未実装・仕様上制約のあるパターンのテストも用意されているか

## 2. 境界値・異常系
- [ ] 無効値（null/空/不正型/極端値/空集合）や不整合入力時のテストがあるか
- [ ] サポート外・非推奨構文・未対応式に対する動作（エラー／警告／例外など）が正しく検証されているか
- [ ] 異常系・例外系テストで、戻り値・メッセージが一貫しているか
- [ ] 意図しない挙動や仕様外変換を検知できるテストが設計されているか

## 3. 設計哲学・一貫性
- [ ] SQL/KSQL側で許容されない構文やパターンを検知・明示する設計になっているか
- [ ] .NET LINQ→KSQL変換のロジックが「誤変換」や予期しない振る舞いをしないよう監視できているか
- [ ] エラー時・未対応時のレスポンス設計（例：UNSUPPORTED ○○等）が全ビルダーで一貫しているか
- [ ] 各ビルダー間でテスト観点・戦略・命名規則・例外処理が統一されているか

## 4. 将来拡張性・保守性
- [ ] 今後の機能拡張・パターン追加時にテストパターンが容易に増やせるか
- [ ] サポート対象外を明示的に（skip, コメント, ドキュメント）残しているか
- [ ] OSSユーザーや他AIが「現状のテスト意図・制約・期待値」を理解できるドキュメント整備が進んでいるか

## 5. 運用・品質担保
- [ ] テストケース名・内容がドメインに即した分かりやすい表現になっているか
- [ ] コードカバレッジ（自動計測値）とのギャップが定期的にレビューされているか
- [ ] 実装・テスト・レビュー（例：鳴瀬／迅人／鏡花）が分離・多重化されているか（AI運用の三権分立）

---
checklistフォルダ以下にもチェックリストがあるのでそれを参照し対応すること

### 鏡花コメント例（レビュー実行時のサンプル）

- 主要な構文パターンが一部抜けており、実運用時の仕様漏れリスク
- 境界値・異常系テストは充実しているが、投影パターン（集計関数/サブクエリ等）のバリエーション不足
- テスト観点がBuilderごとにブレており、OSSユーザーへの説明責任や保守性に課題
- テスト意図や設計思想の明示（コメント・ドキュメント）が弱く、今後の拡張時に認知負荷が上昇する懸念


### Phase1 Cleanup Summary
- Debug/diagnostic and unused methods removed (see `reports/20250622_phase1_cleanup.txt`).
- After each cleanup cycle, rerun `task/src_method_analysis.md` to reassess remaining methods.
